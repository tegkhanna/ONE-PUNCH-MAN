<!DOCTYPE html>
<html>
<head>
	<title>Game</title>
	<link rel="stylesheet" type="text/css" href="project.css">
	<script type="text/javascript">
	//game window in form of object
	var gameWindow = 
	{
		canvas : null,
		context : null,
		init : function()
			{
				this.canvas = document.getElementById("canvas");
				this.context = this.canvas.getContext("2d");
				this.canvas.tabIndex = 1000;
			}
	};
	var down = [];
	function keyIsDown(e)
{
	if(down.indexOf(e.keyCode) == -1)
	{
		down.push(e.keyCode);
	}
}
function keyIsUp(e)
{
	if(down.indexOf(e.keyCode) != -1)
	{
		down.splice(down.indexOf(e.keyCode), 1);
	}
}

function checkKeyDown(x)
{
	if(x == 'w')
		x = 87;
	else if(x == 'a')
		x=65;
	else if(x=='s')
		x=83;
	else if(x=='d') 
		x=68;

	if(down.indexOf(x)!=-1)
		return true;
	else
		return false;
}
	 var fighter1=
    {
    	imgStand1: new Image(),
    	imgStand2: new Image(),
     	imgPunch: new Image(),
     	x:10,
     	y:450,
     	speed : 5,
     	dir : 1,
     	move:0,
     	curr:1,
     	update: function()
     	{
     		if(checkKeyDown('d'))
     		{
     			this.move = 1;
     			this.dir = 1;
     		}
     		else if(checkKeyDown('a'))
     		{
     			this.move = 1;
     			this.dir = -1;
     		}
  
     		if(this.x>=10 && this.x<=750 && this.move==1)
     		{
     			this.x+=(this.dir*this.speed);
     			this.move=0;
     		}
     		else if(this.x<10)
     		{
     			this.x=10;move=0;
     		}
     		else if(this.x>750)
     		{
     			this.x=750;this.move=0;
     		}
     	}
    };//creating an object


     var fighter2=
    { imgStand: new Image(),
      imgPunch: new Image()
    };//creating an object


window.onload = function func()
{   
     
 	run();
	


}		

function init()
{


	gameWindow.init();
	
    var ctx = gameWindow.context;
    ctx.fillStyle ="red";
	ctx.fillRect(5,5,345,20);

	ctx.fillStyle ="red";
	ctx.fillRect(450,5,345,20);
	
    var terrain= new Image();
    terrain.onload = function()
    {
    	ctx.drawImage(terrain, 0,600,800,200);
    }
	terrain.src="sprites/terrain.png";
}

function initFighter1()
{

  
    fighter1.imgStand1.src="sprites/stand1.png";
    fighter1.imgStand2.src="sprites/stand2.png";
    fighter1.imgPunch.src="sprites/punch.png";

}

function gameLoop()
{

		checkInput();

		var ctx = gameWindow.context;
		ctx.clearRect(fighter1.x,fighter1.y,80,150);
		fighter1.update();
		if(fighter1.curr <= 8)
		{
		 	ctx.drawImage(fighter1.imgStand1, fighter1.x,fighter1.y);
		 	fighter1.curr ++;
		 }
		 else
		 {
		 	
		 	ctx.drawImage(fighter1.imgStand2, fighter1.x,fighter1.y);
		 	fighter1.curr++;
		 	if(fighter1.curr == 16)
		 	{
		 		fighter1.curr=0;
		 	}
		 }
		 if(down.length > 0)
			 console.log(down);
		
	
}


function run()
{
	init();
 	initFighter1();
 	setInterval(gameLoop, 34);
}



function checkInput()
{
	gameWindow.canvas.addEventListener("keydown", keyIsDown, false);
	gameWindow.canvas.addEventListener("keyup", keyIsUp, false);
	//gameWindow.canvas.addEventListener("keypress", keyIsPress, false);
}





	</script>
</head>
<body style="background-color:black">
<canvas id="canvas" width="800" height="800">xx</canvas>


</body>
</html>